<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Dryer Done Notifications with Home Assistant and Iotawatt | Relentless Optimizer</title>
<meta name=keywords content><meta name=description content="I do the laundry in our house, and it often takes most of a day because I don&rsquo;t hear the dryer finish."><meta name=author content="Scott Louvau"><link rel=canonical href=https://relentlessoptimizer.com/code/2023/05/04/dryer-done-notifications-with-home-assistant-and-iotawatt/><link href=/assets/css/stylesheet.min.0b2e0140b43ef19b2a750e921516ad4fa6709d5410537b71ea94d625d11a0ddd.css integrity="sha256-Cy4BQLQ+8ZsqdQ6SFRatT6ZwnVQQU3tx6pTWJdEaDd0=" rel="preload stylesheet" as=style><link rel=icon href=https://relentlessoptimizer.com/favicon.svg type=image/svg+xml><link rel=icon href=https://relentlessoptimizer.com/favicon-128x128.png sizes=128x128><link rel=icon href=https://relentlessoptimizer.com/favicon-32x32.png sizes=32x32><link rel=icon href=https://relentlessoptimizer.com/favicon.ico sizes=16x16><meta name=generator content="Hugo 0.125.6"><link rel=alternate hreflang=en href=https://relentlessoptimizer.com/code/2023/05/04/dryer-done-notifications-with-home-assistant-and-iotawatt/><meta property="og:title" content="Dryer Done Notifications with Home Assistant and Iotawatt"><meta property="og:description" content="I do the laundry in our house, and it often takes most of a day because I don&rsquo;t hear the dryer finish."><meta property="og:type" content="article"><meta property="og:url" content="https://relentlessoptimizer.com/code/2023/05/04/dryer-done-notifications-with-home-assistant-and-iotawatt/"><meta property="article:section" content="code"><meta property="article:published_time" content="2023-05-04T00:00:00+00:00"><meta property="article:modified_time" content="2023-05-04T00:00:00+00:00"></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><div class=logo><a href=/ accesskey=h title="Relentless Optimizer (Alt + H)">Relentless Optimizer</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon"><use xlink:href="/assets/icons.svg#moon"/></svg><svg id="sun"><use xlink:href="/assets/icons.svg#sun"/></svg></button></span></div><nav class=site-nav><input type=checkbox id=nav-trigger class=nav-trigger>
<label for=nav-trigger><span class=menu-icon><svg><use xlink:href="/assets/icons.svg#menu"/></svg></span></label><div class=trigger><a class=page-link href=/about title=About>About</a>
<a class=page-link href=/code/ title=Code>Code</a>
<a class=page-link href=/finance/ title=Finance>Finance</a>
<a class=page-link href=/gaming/ title=Gaming>Gaming</a>
<a class=page-link href=/life/ title=Life>Life</a>
<a class=page-link href=/retire-early title="Retire Early">Retire Early</a></div></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=/>Home</a>&nbsp;»&nbsp;<a href=/code/>Code</a></div><h1 class=post-title>Dryer Done Notifications with Home Assistant and Iotawatt</h1><div class=post-meta>May 4, 2023 · 3 min · Scott Louvau</div></header><div class=post-content><p>I do the laundry in our house, and it often takes most of a day because I don&rsquo;t hear the dryer finish. I set a timer on my phone, but it&rsquo;s often not done when I go check on it. Today Darinee and I finally implemented a &ldquo;Dryer is done&rdquo; notification on my phone, so I&rsquo;ll know exactly when it&rsquo;s time.</p><p>We run a <a href=https://www.home-assistant.io/>Home Assistant</a> server so that we can have smart devices without tons of different apps, privacy leaks, or devices dying because the manufacturer turns off the services they need.</p><p>Last year we set up an <a href=https://iotawatt.com/>IotaWatt</a> to see how much of our power use is heating and cooling, car charging, and &ldquo;everything else&rdquo;. It&rsquo;s also been useful for finding surprise power use and reducing it, but that&rsquo;s another story.</p><p>These two devices make a &ldquo;dryer done&rdquo; notification easy. First, we looked at the IotaWatt&rsquo;s built-in reporting to see what a few dryer cycles look like:</p><p><img loading=lazy src=img/IotaWatt-Dryer-Use.png alt=IotaWatt-Dryer-Use></p><p>The dryer uses about 5,500 watts when the heating element is on, and about 450 watts when laundry is just tumbling right at the end. The little spikes afterward are the &ldquo;wrinkle care&rdquo; tumbling happening periodically.</p><p>In Home Assistant we can add a binary sensor to <strong>configuration.yaml</strong> to identify when a dryer cycle is running. We&rsquo;ll mark the dryer &ldquo;on&rdquo; when it uses more than 400 watts for more than five minutes. This will pick up drying cycles but won&rsquo;t trigger another load for the wrinkle care pulses. We&rsquo;ll wait for two minutes of under 400 watts to consider the cycle done, just in case some of the &ldquo;tumble-only&rdquo; periods are under 400 watts briefly.</p><p>To edit Home Assistant configuration files directly, go to the web interface (usually <a href=http://homeassistant.local:8123>http://homeassistant.local:8123</a>) and click on &lsquo;<strong>Studio Code Server</strong>&rsquo; on the left bar. We add the new sensor definition:</p><h3 id=configurationyaml>configuration.yaml<a hidden class=anchor aria-hidden=true href=#configurationyaml>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>binary_sensor</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>platform</span><span class=p>:</span><span class=w> </span><span class=l>template</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>sensors</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>dryer_running</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>friendly_name</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;Dryer Running&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>delay_on</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;00:05:00&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>delay_off</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;00:02:00&#34;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>value_template</span><span class=p>:</span><span class=w> </span><span class=p>&gt;-</span><span class=sd>
</span></span></span><span class=line><span class=cl><span class=sd>          {{ states(&#39;sensor.dryer&#39;)|float &gt; 400 }}</span><span class=w>          
</span></span></span></code></pre></div><p>With the sensor defined, we can add an Automation to send a notification to my phone when the dryer is done:</p><h3 id=automationsyaml>automations.yaml<a hidden class=anchor aria-hidden=true href=#automationsyaml>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl>- <span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;1683153015371&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>alias</span><span class=p>:</span><span class=w> </span><span class=l>Dryer Done</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>description</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>trigger</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>platform</span><span class=p>:</span><span class=w> </span><span class=l>state</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>entity_id</span><span class=p>:</span><span class=w> </span><span class=l>binary_sensor.dryer_running</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>from</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;on&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>to</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;off&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>condition</span><span class=p>:</span><span class=w> </span><span class=p>[]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>action</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span>- <span class=nt>service</span><span class=p>:</span><span class=w> </span><span class=l>notify.mobile_app_scotts_i14</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>data</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>message</span><span class=p>:</span><span class=w> </span><span class=l>Dryer is done!</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>mode</span><span class=p>:</span><span class=w> </span><span class=l>single</span><span class=w>
</span></span></span></code></pre></div><p>To test and load the new configuration in Home Assistant, click &lsquo;<strong>Configuration</strong>&rsquo;, then &lsquo;<strong>Settings</strong>&rsquo;, and then &lsquo;<strong>Check Configuration</strong>&rsquo; to verify your YAML is valid and &lsquo;<strong>RESTART</strong>&rsquo; to load it.</p><p>If you don&rsquo;t see these options in Settings, make sure your user is an <strong>Administrator</strong> (in Configuration -> People & Zones) and that &lsquo;<strong>Advanced Mode</strong>&rsquo; is on (click your user name in the bottom left and find the toggle for it).</p><p><img loading=lazy src=img/Home-Assistant-Check-and-Reload.png alt=Home-Assistant-Check-and-Reload></p><p>&mldr;and that&rsquo;s it! We ran a test load and we got:</p><p><img loading=lazy src=img/Dryer-Done-Notification.png alt=Dryer-Done-Notification></p><p>I&rsquo;ll never miss the dryer finishing again, and never go down to check it and find it&rsquo;s not really done. Like many home automations, I can&rsquo;t believe it took me this long to do it.</p></div><footer class=post-footer><nav class=paginav><a class=prev href=/code/2023/03/23/diy-wireguard-setup/><span class=title>« Previous Post</span><br><span>DIY Wireguard Setup</span>
</a><a class=next href=/gaming/2023/06/08/my-best-wordle-guesses/><span class=title>Next Post »</span><br><span>My Best Wordle Guesses</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=/>Relentless Optimizer</a>, all code <a href=/LICENSE.txt>MIT License</a></span>
<span>&#183;</span>
<span>Incessantly optimizing code, games, and finances.</span><div class=social-icons><a class=social-rss href=index.xml target=_blank title=Rss><svg><use xlink:href="/assets/icons.svg#rss"/></svg>
</a><a class=social-email href=obfuscated target=_blank title=Email><svg><use xlink:href="/assets/icons.svg#email"/></svg>
</a><a class=social-github href=https://github.com/ScottLouvau target=_blank title=Github><svg><use xlink:href="/assets/icons.svg#github"/></svg>
</a><a class=social-linkedin href=https://linkedin.com/in/scott-louvau-97846531 target=_blank title="Linked in"><svg><use xlink:href="/assets/icons.svg#linkedin"/></svg></a></div></footer><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>var mail=["mail","to:","scottlo","@","out","look","."];document.querySelectorAll(".social-email").forEach(e=>e.href=mail.join("")+"com")</script></body></html>