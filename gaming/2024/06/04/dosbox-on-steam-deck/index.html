<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>DOSBox on Steam Deck | Relentless Optimizer</title>
<meta name=keywords content><meta name=description content="I was delighted to play some of my old DOS favorites on my Steam Deck, but quickly ran into a number of problems with the EmuDeck > RetroArch > DOSBox-Pure path."><meta name=author content="Scott Louvau"><link rel=canonical href=https://relentlessoptimizer.com/gaming/2024/06/04/dosbox-on-steam-deck/><link href=/assets/css/stylesheet.min.0b2e0140b43ef19b2a750e921516ad4fa6709d5410537b71ea94d625d11a0ddd.css integrity="sha256-Cy4BQLQ+8ZsqdQ6SFRatT6ZwnVQQU3tx6pTWJdEaDd0=" rel="preload stylesheet" as=style><link rel=icon href=https://relentlessoptimizer.com/favicon.svg type=image/svg+xml><link rel=icon href=https://relentlessoptimizer.com/favicon-128x128.png sizes=128x128><link rel=icon href=https://relentlessoptimizer.com/favicon-32x32.png sizes=32x32><link rel=icon href=https://relentlessoptimizer.com/favicon.ico sizes=16x16><meta name=generator content="Hugo 0.126.3"><link rel=alternate hreflang=en href=https://relentlessoptimizer.com/gaming/2024/06/04/dosbox-on-steam-deck/><meta property="og:title" content="DOSBox on Steam Deck"><meta property="og:description" content="I was delighted to play some of my old DOS favorites on my Steam Deck, but quickly ran into a number of problems with the EmuDeck > RetroArch > DOSBox-Pure path."><meta property="og:type" content="article"><meta property="og:url" content="https://relentlessoptimizer.com/gaming/2024/06/04/dosbox-on-steam-deck/"><meta property="article:section" content="gaming"><meta property="article:published_time" content="2024-06-04T00:00:00+00:00"><meta property="article:modified_time" content="2024-06-04T00:00:00+00:00"></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><div class=logo><a href=/ accesskey=h title="Relentless Optimizer (Alt + H)">Relentless Optimizer</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon"><use xlink:href="/assets/icons.svg#moon"/></svg><svg id="sun"><use xlink:href="/assets/icons.svg#sun"/></svg></button></span></div><nav class=site-nav><input type=checkbox id=nav-trigger class=nav-trigger>
<label for=nav-trigger><span class=menu-icon><svg><use xlink:href="/assets/icons.svg#menu"/></svg></span></label><div class=trigger><a class=page-link href=/about title=About>About</a>
<a class=page-link href=/code/ title=Code>Code</a>
<a class=page-link href=/finance/ title=Finance>Finance</a>
<a class=page-link href=/gaming/ title=Gaming>Gaming</a>
<a class=page-link href=/life/ title=Life>Life</a>
<a class=page-link href=/retire-early title="Retire Early">Retire Early</a></div></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=/>Home</a>&nbsp;»&nbsp;<a href=/gaming/>Gaming</a></div><h1 class=post-title>DOSBox on Steam Deck</h1><div class=post-meta>June 4, 2024 · 5 min · Scott Louvau</div></header><div class=post-content><p>I was delighted to play some of my old DOS favorites on my Steam Deck, but quickly ran into a number of problems with the EmuDeck > RetroArch > DOSBox-Pure path. After trying the various options, I found a setup that works well and wanted to document it here.</p><h2 id=goals>Goals<a hidden class=anchor aria-hidden=true href=#goals>#</a></h2><p>I wanted my DOS games to:</p><ul><li>Run reliably without crashes or video or audio stutter.</li><li>Exit directly back to SteamOS.</li><li>Scale to good resolutions for each display I use. (Built-In, Desk Monitor, TV)</li><li>Run fullscreen from Game Mode or windowed in Desktop Mode.</li><li>Work correctly with the Keyboard and Mouse by default.</li><li>Work with the Steam Deck controls for mouse-only play.</li><li>Work with my NumPad keyboard for &ldquo;few key only&rdquo; games for couch play.</li></ul><p>I was eventually able to get this all to work with &ldquo;original&rdquo; DOSBox from the Discover Store. The other variants I tried - DosBox-Pure, DosBox-X, and DosBox-Staging - all failed at least one of the above goals.</p><h2 id=my-preferred-setup>My Preferred Setup<a hidden class=anchor aria-hidden=true href=#my-preferred-setup>#</a></h2><p>You can install DOSBox on SteamOS directly from the &ldquo;Discover Store&rdquo; in Desktop Mode.</p><h3 id=installing-original-dosbox>Installing Original DOSBox<a hidden class=anchor aria-hidden=true href=#installing-original-dosbox>#</a></h3><ul><li>Press the Steam Button</li><li>Under Power, choose &ldquo;Switch to Desktop&rdquo;</li><li>Open the Discover Store (pinned near the bottom left)</li><li>Search (top left of app) for &ldquo;DOSBox&rdquo;</li><li>Find the option called just &ldquo;DOSBox&rdquo; and click &ldquo;Install&rdquo;</li></ul><h3 id=game-location>Game Location<a hidden class=anchor aria-hidden=true href=#game-location>#</a></h3><p>All games need to be under <strong>/home/deck/Documents</strong> for DOSBox to access them, unless you use <a href=https://flathub.org/apps/com.github.tchx84.Flatseal>Flatseal</a> to add extra permissions. I made a <strong>/home/deck/Documents/DOS</strong> folder and then put one folder per game inside.</p><h3 id=configuration-dosboxconf>Configuration (dosbox.conf)<a hidden class=anchor aria-hidden=true href=#configuration-dosboxconf>#</a></h3><p>DOSBox allows you to pass <code>--conf XYZ.conf</code> <strong>multiple times</strong>, with the settings in later ones overriding earlier ones.</p><p>We can use this to create:</p><ul><li>A <strong>dosbox.conf per screen resolution</strong> with common settings</li><li>A <strong>dosbox.conf per game</strong> to run the game and with setting overrides</li><li>A <strong>bash script per game</strong> to detect the resolution and add to Steam</li></ul><p>Here&rsquo;s a sample of each:</p><h4 id=res-1280x800conf>res-1280x800.conf<a hidden class=anchor aria-hidden=true href=#res-1280x800conf>#</a></h4><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl># Integer Scales for 320x240 games
</span></span><span class=line><span class=cl># ===
</span></span><span class=line><span class=cl># windowresolution=1600x1200 (5x, best for 3440x1440 Ultrawide Monitor)
</span></span><span class=line><span class=cl># windowresolution=1280x960  (4x, best for 1920x1080 TV)
</span></span><span class=line><span class=cl># windowresolution=960x720   (3x, best for 1280x800 built-in display)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>[sdl]
</span></span><span class=line><span class=cl>windowresolution=960x720
</span></span><span class=line><span class=cl>autolock=false
</span></span><span class=line><span class=cl>output=openglnb
</span></span><span class=line><span class=cl>mapperfile=game-default-mapper.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>[render]
</span></span><span class=line><span class=cl>aspect=true
</span></span><span class=line><span class=cl>scaler=normal
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>[cpu]
</span></span><span class=line><span class=cl>core=dynamic
</span></span><span class=line><span class=cl>cycles=100000
</span></span></code></pre></div><h3 id=game-anvilconf>game-Anvil.conf<a hidden class=anchor aria-hidden=true href=#game-anvilconf>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[autoexec]
</span></span><span class=line><span class=cl>mount C &#34;~/Documents/DOS&#34;
</span></span><span class=line><span class=cl>imgmount d -t iso -fs iso &#34;~/Documents/DOS/ANVIL/Anvil.iso&#34;
</span></span><span class=line><span class=cl>c:
</span></span><span class=line><span class=cl>cd \ANVIL
</span></span><span class=line><span class=cl>ANVIL
</span></span><span class=line><span class=cl>exit
</span></span></code></pre></div><h3 id=anvil-of-dawnsh>Anvil of Dawn.sh<a hidden class=anchor aria-hidden=true href=#anvil-of-dawnsh>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/sh
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=nv>resolution</span><span class=o>=</span><span class=k>$(</span>xdpyinfo <span class=p>|</span> grep dimensions: <span class=p>|</span> awk <span class=s1>&#39;{print $2}&#39;</span><span class=k>)</span>
</span></span><span class=line><span class=cl>flatpak run com.dosbox.DOSBox -conf <span class=s2>&#34;/home/deck/Documents/DOS/DosBox/res-</span><span class=nv>$resolution</span><span class=s2>.conf&#34;</span> --conf <span class=s2>&#34;/home/deck/Documents/DOS/DosBox/game-Anvil.conf&#34;</span>
</span></span></code></pre></div><p>After you create the script, you need to make it executable. Right-click in the file explorer, click Properties, go to the Permissions tab, and check &ldquo;Is executable&rdquo;. (You can also run <code>chmod +x [XYZ.sh]</code> from the Terminal.)</p><h3 id=keyboard-mapper-file>Keyboard Mapper File<a hidden class=anchor aria-hidden=true href=#keyboard-mapper-file>#</a></h3><p>Run DOSBox with <code>--startmapper</code> to run the <a href=https://www.dosbox.com/wiki/Mapper>Keyboard Mapper</a>. You can click buttons with the mouse to set up mappings for them, and then click Save to save the file out. Use <code>mapperfile=mapper-file-path.txt</code> to reference it from a dosbox.conf.</p><p>I used the Keyboard Mapper to map keys on my little numpad keyboard to keys I need (ESC, Enter, Backspace, WASD) for games which only need a few keyboard keys.</p><p><img loading=lazy src=img/numpad.jpg alt="Microsoft Sculpt Numpad"></p><h3 id=adding-to-steam>Adding to Steam<a hidden class=anchor aria-hidden=true href=#adding-to-steam>#</a></h3><p>Once you have created a script to run each game, you can right-click on them in the File Explorer and pick &ldquo;Add to Steam&rdquo; to add them as non-Steam Games.</p><p>You don&rsquo;t need any Compatibility settings for them, because DOSBox runs directly on SteamOS.</p><p>You can use Decky and the SteamGridDB plugin to find artwork for the games so that they look nice in the Steam Library. The art isn&rsquo;t always as good as what EmuDeck finds; I need to figure out where EmuDeck caches them so that I can use EmuDeck to locate the art and then SteamGridDB to apply it.</p><h3 id=running-in-desktop-mode>Running in Desktop Mode<a hidden class=anchor aria-hidden=true href=#running-in-desktop-mode>#</a></h3><p>Games will run nicely in a window in Desktop Mode when double-clicked. I set <code>autolock=false</code> in my dosbox.conf because mouse capture was annoying and the games still work fine in Game Mode when full screen.</p><h2 id=dosbox-pure-problems-and-solutions>DOSBox Pure Problems and Solutions<a hidden class=anchor aria-hidden=true href=#dosbox-pure-problems-and-solutions>#</a></h2><p>I ran into quite a few problems trying to run under DOSBox-Pure in RetroArch. I&rsquo;m documenting the problems here so that people hitting them can find this post. I suggest using original DOSBox instead, but I&rsquo;ve included workarounds and fixes when I figured them out for anyone who wants to stick with DOSBox-Pure.</p><h3 id=emudeck-couldnt-find-my-dosbox-games>EmuDeck couldn&rsquo;t find my DOSBox games<a hidden class=anchor aria-hidden=true href=#emudeck-couldnt-find-my-dosbox-games>#</a></h3><p>I had to look into the <a href="https://github.com/schellingb/dosbox-pure?tab=readme-ov-file#dosbox-pure">README</a> to figure out that DOSBox-Pure expects games to <a href="https://github.com/schellingb/dosbox-pure?tab=readme-ov-file#load-games-from-zip">each be in a ZIP file</a> to be found by the EmuDeck &ldquo;Steam ROM Manager&rdquo; scan process.</p><h3 id=dosbox-pure-didnt-find-my-dosboxconf-files>DOSBox-Pure didn&rsquo;t find my dosbox.conf files<a hidden class=anchor aria-hidden=true href=#dosbox-pure-didnt-find-my-dosboxconf-files>#</a></h3><p>The README said that a dosbox.conf file found in the root of the ZIP will be run. I couldn&rsquo;t get it to run until I realized that zipping a folder from Windows or SteamOS Desktop Mode puts everything into a top-level folder.</p><p>In SteamOS, you can ZIP a folder into the root of a zip by running this command in the Terminal:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>cd [YourGameDirectory]
</span></span><span class=line><span class=cl>zip -0 -r &#34;[YourGame].zip&#34; *
</span></span></code></pre></div><h3 id=specific-keyboard-keys-didnt-work-q--1-w--2->Specific Keyboard keys didn&rsquo;t work (Q = 1, W = 2, &mldr;)<a hidden class=anchor aria-hidden=true href=#specific-keyboard-keys-didnt-work-q--1-w--2->#</a></h3><p>When trying to run command line commands, I figured out that specific keyboard keys didn&rsquo;t work. Q mapped to 1, W to 2, S to space, and A, Z, and X to nothing.</p><p>These turn out to be RetroArch mappings. There&rsquo;s a <a href="https://github.com/schellingb/dosbox-pure?tab=readme-ov-file#dosbox-pure">Game Focus Mode in the DOSBox-Pure README</a>, but I didn&rsquo;t want to press Scroll Lock every time I start a game.</p><p>Instead, you can remove the keyboard mappings in RetroArch.</p><ul><li>In a RetroArch DOSBox game, press in both thumbsticks to get to the RetroArch UI.</li><li>Go to Settings -> Input -> RetroPad Binds -> Port 1 Controls.</li><li>Press &ldquo;Clear&rdquo; to remove the bindings for Left-Ctrl, Left-Alt, Left-Shift, Space, 1, 2.</li><li>Select &ldquo;Save Controller Profile&rdquo;</li></ul><p>Games worked afterward, but the mapping removals broke some of my SNES and Genesis controls in RetroArch; ultimately, it&rsquo;s nicer to just keep DOS games separate.</p><h3 id=dosboxconf-autoexec-exit-causes-hang>DosBox.conf autoexec &rsquo;exit&rsquo; causes hang<a hidden class=anchor aria-hidden=true href=#dosboxconf-autoexec-exit-causes-hang>#</a></h3><p>I want my games to quit nicely back to SteamOS on exit. If you don&rsquo;t add a specific &ldquo;exit&rdquo; command to dosbox.conf, quitting a game just leaves you at a prompt. If you do add &ldquo;exit&rdquo;, DOSBox-Pure hangs with diagonal lines over the last rendered screen.</p><p>You have to press the Steam Button and pick &ldquo;Exit Game&rdquo;. I didn&rsquo;t find a workaround for this issue.</p></div><footer class=post-footer><nav class=paginav><a class=prev href=/gaming/2024/05/08/my-wordle-goodnotes-playstyle/><span class=title>« Previous Post</span><br><span>My Wordle GoodNotes Playstyle</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=/>Relentless Optimizer</a>, all code <a href=/LICENSE.txt>MIT License</a></span>
<span>&#183;</span>
<span>Incessantly optimizing code, games, and finances.</span><div class=social-icons><a class=social-rss href=index.xml target=_blank title=Rss><svg><use xlink:href="/assets/icons.svg#rss"/></svg>
</a><a class=social-email href=obfuscated target=_blank title=Email><svg><use xlink:href="/assets/icons.svg#email"/></svg>
</a><a class=social-github href=https://github.com/ScottLouvau target=_blank title=Github><svg><use xlink:href="/assets/icons.svg#github"/></svg>
</a><a class=social-linkedin href=https://linkedin.com/in/scott-louvau-97846531 target=_blank title="Linked in"><svg><use xlink:href="/assets/icons.svg#linkedin"/></svg></a></div></footer><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>var mail=["mail","to:","scottlo","@","out","look","."];document.querySelectorAll(".social-email").forEach(e=>e.href=mail.join("")+"com")</script></body></html>