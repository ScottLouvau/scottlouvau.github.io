<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>CloudFlare Pages Custom Domain Setup | Relentless Optimizer</title><meta name=keywords content><meta name=description content="This blog is hosted on CloudFlare Pages with CloudFlare-managed DNS, and I finally have DNS resolution working fully. The documentation was confusing and incomplete - here is what I needed to know."><meta name=author content="Scott Louvau"><link rel=canonical href=https://relentlessoptimizer.com/code/2021/06/26/cloudflare-pages-custom-domain-setup/><link href=/assets/css/stylesheet.min.e89367ee9edc028197f2f3ab8f25be67ae6e05d027035c03cfa5821f77df7c39.css integrity="sha256-6JNn7p7cAoGX8vOrjyW+Z65uBdAnA1wDz6WCH3fffDk=" rel="preload stylesheet" as=style><link rel=icon href=https://relentlessoptimizer.com/favicon.svg type=image/svg+xml><link rel=icon href=https://relentlessoptimizer.com/favicon-128x128.png sizes=128x128><link rel=icon href=https://relentlessoptimizer.com/favicon-32x32.png sizes=32x32><link rel=icon href=https://relentlessoptimizer.com/favicon.ico sizes=16x16><meta name=generator content="Hugo 0.84.1"><meta property="og:title" content="CloudFlare Pages Custom Domain Setup"><meta property="og:description" content="This blog is hosted on CloudFlare Pages with CloudFlare-managed DNS, and I finally have DNS resolution working fully. The documentation was confusing and incomplete - here is what I needed to know."><meta property="og:type" content="article"><meta property="og:url" content="https://relentlessoptimizer.com/code/2021/06/26/cloudflare-pages-custom-domain-setup/"><meta property="article:section" content="code"><meta property="article:published_time" content="2021-06-26T00:00:00+00:00"><meta property="article:modified_time" content="2021-06-26T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="CloudFlare Pages Custom Domain Setup"><meta name=twitter:description content="This blog is hosted on CloudFlare Pages with CloudFlare-managed DNS, and I finally have DNS resolution working fully. The documentation was confusing and incomplete - here is what I needed to know."></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><header class=header><div class=logo><a href=/ accesskey=h title="Relentless Optimizer (Alt + H)">Relentless Optimizer</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon"><use xlink:href="/assets/icons.svg#moon"/></svg><svg id="sun"><use xlink:href="/assets/icons.svg#sun"/></svg></button></span></div><nav class=site-nav><input type=checkbox id=nav-trigger class=nav-trigger>
<label for=nav-trigger><span class=menu-icon><svg><use xlink:href="/assets/icons.svg#menu"/></svg></span></label><div class=trigger><a class=page-link href=/about title=About>About</a>
<a class=page-link href=/code/ title=Code>Code</a>
<a class=page-link href=/finance/ title=Finance>Finance</a>
<a class=page-link href=/gaming/ title=Gaming>Gaming</a>
<a class=page-link href=/retire-early title="Retire Early">Retire Early</a></div></nav></header><main class=main><article class=post-single><header class=post-header><img alt src="https://asset.relentlessoptimizer.com/head.png?path=/code/2021/06/26/cloudflare-pages-custom-domain-setup/" width=1 height=1><div class=breadcrumbs><a href=/>Home</a>&nbsp;»&nbsp;<a href=/code/>Code</a></div><h1 class=post-title>CloudFlare Pages Custom Domain Setup</h1><div class=post-meta>June 26, 2021&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Scott Louvau</div></header><div class=post-content><p>This blog is hosted on CloudFlare Pages with CloudFlare-managed DNS, and I finally have DNS resolution working fully. The documentation was confusing and incomplete - here is what I needed to know.</p><h2 id=buy-your-custom-domain-early>Buy Your Custom Domain Early<a hidden class=anchor aria-hidden=true href=#buy-your-custom-domain-early>#</a></h2><p>CloudFlare provides DNS hosting and domain management, but you can&rsquo;t (currently) buy a domain from them initially. I had to buy my domain via domain.com, wait <strong>60 days</strong> so that it could be transferred, and then go to CloudFlare to have them take over DNS management.</p><p>CloudFlare Pages requires CloudFlare DNS management for custom domains, so I had to host on GitHub Pages for the first 60 days.</p><h2 id=cloudflare-configuration>CloudFlare Configuration<a hidden class=anchor aria-hidden=true href=#cloudflare-configuration>#</a></h2><p>You need DNS entries and you need CloudFlare Pages to know the custom domain names for resolution to fully work. You also want <strong>both</strong> the apex domain (relentlessoptimizer.com) and www (<a href=http://www.relentlessoptimizer.com>www.relentlessoptimizer.com</a>) to resolve to the website.</p><p>CloudFlare Pages has a &ldquo;wizard-like&rdquo; setup process which will do both pieces of configuration, so:</p><ol><li>Log in to CloudFlare.</li><li>Select &ldquo;Pages&rdquo; on the right side navigation.</li><li>Select the name of your CloudFlare Pages Site.</li><li>Select &ldquo;Custom domains&rdquo;.</li><li>Select &ldquo;Set up a custom domain&rdquo; and follow the steps.</li><li>Do this for both your apex domain and &ldquo;www&rdquo; (relentlessoptimizer.com, <a href=http://www.relentlessoptimizer.com>www.relentlessoptimizer.com</a>).</li><li>Wait a while and test the name resolution.</li></ol><p><img loading=lazy src=img/cloudflare-pages-custom-domain.png alt="CloudFlare Pages Configuration"></p><h2 id=why-cloudflare-pages>Why CloudFlare Pages?<a hidden class=anchor aria-hidden=true href=#why-cloudflare-pages>#</a></h2><p>I wanted to host on CloudFlare Pages instead of GitHub Pages mostly because:</p><ul><li><p>CloudFlare offers unlimited bandwidth (vs 100 GB), even in the free tier</p></li><li><p>CloudFlare provides basic no-JS analytics</p></li></ul><p>In my brief page performance testing, it looks like CloudFlare provides slightly lower latency globally than GitHub Pages, though they both seem to have globally distributed by site (so it won&rsquo;t take seconds to load in Australia, for example).</p><h2 id=minor-gotchas>Minor Gotchas<a hidden class=anchor aria-hidden=true href=#minor-gotchas>#</a></h2><p>I want to briefly call out a few other problems I ran into setting up the site.</p><p>This blog uses Hugo and is hosted in a GitHub repository. You can get GitHub Pages or CloudFlare Pages to build a Hugo site for you, but the version of Hugo that CloudFlare Pages uses was too old. I ended up setting up a GitHub Action to do the Hugo build and publish the outputs to a branch, and then I deploy to CloudFlare Pages with no build action from that branch.</p><p>Also, CloudFlare Pages offers some analytics, but it looks like they don&rsquo;t keep anything longer than 28 days and they aren&rsquo;t really geared to show views per post (just the top few URLs). I&rsquo;m trying to build my own simple analytics using my Raspberry Pi. More on that in another post.</p></div><footer class=post-footer><img alt loading=lazy src="https://asset.relentlessoptimizer.com/foot.png?path=/code/2021/06/26/cloudflare-pages-custom-domain-setup/" width=1 height=1><nav class=paginav><a class=prev href=/finance/2021/06/09/how-we-kept-the-same-budget-for-eight-years/><span class=title>« Previous Post</span><br><span>How We Kept The Same Budget for Eight Years</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2021 <a href=/>Relentless Optimizer</a>, all code <a href=/LICENSE.txt>MIT License</a></span>
<span>&#183;</span>
<span>Incessantly optimizing code, games, and finances.</span><div class=social-icons><a href=index.xml target=_blank rel="noopener noreferrer me" title=Rss><svg><use xlink:href="/assets/icons.svg#rss"/></svg></a><a href=mailto:scottlo@outlook.com target=_blank rel="noopener noreferrer me" title=Email><svg><use xlink:href="/assets/icons.svg#email"/></svg></a><a href=https://github.com/ScottLouvau target=_blank rel="noopener noreferrer me" title=Github><svg><use xlink:href="/assets/icons.svg#github"/></svg></a><a href=https://linkedin.com/in/scott-louvau-97846531 target=_blank rel="noopener noreferrer me" title="Linked in"><svg><use xlink:href="/assets/icons.svg#linkedin"/></svg></a></div></footer><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>