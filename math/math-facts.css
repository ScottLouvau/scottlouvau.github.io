/* Dynamically size text and controls to browser size */
:root {
    --min-font-size: 10px;
    --control-size: clamp(20px, 6vw, 40px);
    --problem-size: min(16vw, 16vh);
}

/* Make controls much bigger on mobile */
@media screen and (max-width: 600px) {
    :root {
        --min-font-size: 8px;
        --control-size: clamp(20px, 12vw, 40px);
    }
}

* {
    font-family: Arial, Helvetica, sans-serif;
}

html,
body {
    font-size: var(--min-font-size);
    margin: 0;
    padding: 0;
    height: 100%;
}

input, select, label {
    font-size: var(--min-font-size);
}

body {
    display: flex;
    flex-direction: column;
}

.spacer {
    flex-grow: 1;
}

/* --- Math Problem Box --- */ 

#problem {
    display: grid;
    grid-template-columns: 1fr 3fr;
    grid-template-rows: 1fr 1fr 0.3fr 1fr;
    font-size: var(--problem-size);

    width: 2.5em;
    margin: auto auto;
    padding: 0.25em;

    border: solid 1px #888;
}

#upper {
    grid-column: 2;
    grid-row: 1;
    text-align: right;
}

#op {
    grid-column: 1;
    grid-row: 2;
    cursor: pointer;
}

#lower {
    grid-column: 2;
    grid-row: 2;
    text-align: right;
}

#line {
    grid-column: 1 / -1;
    grid-row: 3;

    height: 1px;
    border-top: 0.08em solid black;
}

#answer-box {
    grid-column: 1 / -1;
    grid-row: 4;
}

#answer {
    font-size: var(--problem-size);
    text-align: right;
    box-sizing: border-box;
    width: 100%;
}

/* --- Controls --- */

#control-bar {
    border-bottom: thin solid #888;
    width: calc(100% - 4px);
    padding: 0em 0.1em;
    flex-grow: 0;

    display: flex;
    flex-direction: row;
}

.center {
    flex-grow: 1;
    text-align: center;
    vertical-align: middle;
    font-size: var(--control-size);
}

.icon {
    margin: 0.2em;
    display: inline-block;
}

.icon svg {
    width: var(--control-size);
    height: var(--control-size);
    cursor: pointer;

    /* To get SVG not to be weirdly positioned vertically */
    display: inline-block;

    /* Set 'viewBox="0 0 40 40"' for 40px-intended-size to get runtime scaling */
}

#progress-outer {
    background-repeat: no-repeat;
    background-size: 100%;
    width: 100% 100%;
    height: fit-content;
    flex-grow: 0;
}

#progress {
    width: 100%;
    height: 100%;
    background-repeat: no-repeat;
    background-size: 0%;
}

/* ---- Overlays ---- */
.overlay {
    z-index: 10;
    background-color: rgba(96, 96, 96, 0.9);
    position: absolute;
    left: 0;
    top: 0;
    right: 0;
    bottom: 0;
    
    display: flex;
    align-items: center;
    justify-content: center;
}

.contents {
    width: fit-content;
    border: solid 1px black;
    background-color: white;
    padding: 1em;

    display: flex;
    flex-direction: column;
    justify-content: center;
}

/* ---- Analytics Tables ---- */
.contents table {
    font-size: clamp(var(--min-font-size), min(2vw, 2vh), 20px);
    border-collapse: collapse;
}

.contents table th, td {
    border: solid 1px #888;
    width: 2.5em;
    height: 2.5em;
    text-align: center;
}

.contents table.subtraction {
    font-size: clamp(var(--min-font-size), min(1.6vw, 1.6vh), 20px);
}

.contents table.subtraction th, td {
    width: 2em;
    height: 2em;
}

.contents table.stats th:first-child {
    font-size: 200%;
    width: 1em;
    height: 1em;
    cursor: pointer;
}

.contents table.stats th, td:first-child { 
    color: #888;
}

/* https://observablehq.com/@d3/color-schemes; Discrete (8), 4th to 5th usually. */
/* Blue: ["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594"] */
/* Green: ["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#005a32"] */
/* Green/Blue: ["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#08589e"] */
/* Yellow/Green: ["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#005a32"] */

.great {
    background-image: linear-gradient(to right, #74c476, #41ab5d);
}

.good {
    background-image: linear-gradient(to right, #f7fcb9, #addd8e);
}

.ok {
    background-image: linear-gradient(to right, #fdd0a2, #fdae6b);
}

.bad {
    background-image: linear-gradient(to right, #fc9272, #fb6a4a);
}

/* ---- Calendar History ---- */
/* https://uigradients.com/; https://cssgradient.io/ */
.bronze { background-image: linear-gradient(to right, #ca7345, #732100); }
.silver { background-image: linear-gradient(to right, #d7dde8, #757f9a);  }
.gold { background-image: linear-gradient(to right, #eecd3f, #99771f); }

.fill-bronze { fill: #ca7345;}
.fill-silver { fill: #d7dde8;}
.fill-gold { fill: #eecd3f; }

.calendar th, .calendar td {
    font-size: clamp(var(--min-font-size), min(3vw, 3vh), 30px);
}

.calendar th {
    font-weight: normal;
    color: #888;
}

.calendar svg {
    width: 3em;
    height: 3em;
}

.calendar td {
    text-align: left;
    vertical-align: top;
    padding: 0.2em;

    width: 3em;
    height: 4em;
}

.calendar .date {
    font-size: 60%;
    color: #888;
}

/* ---- Help and Share ---- */
.help, .share {
    max-width: min(80vw, 40em);
    padding: 1em;
    font-size: clamp(10px, 2vw, 20px);
    white-space: pre-line;

    /* Issue: Not in Safari */
    overflow-wrap: anywhere;
}

#share-text {
    font-size: clamp(10px, 4vw, 30px);
}

.share-links {
    text-align: right;
    margin-top: 1em;
    white-space: initial;
}

/* ---- Settings ---- */
.settings label, .settings input, .settings select, .settings td {
    font-size: clamp(12px, 3.5vw, 20px);
}

.settings label {
    text-align: right;
}

.settings input {
    width: 3em;
}

.settings td {
    border: none;
    text-align: left;
    height: 1.75em;
}

.settings tr td:first-child {
    text-align: right;
    width: fit-content;
    padding-right: 0.75em;
}